document.querySelectorAll('.banner-container-nmd').forEach((banner)=>{let fg=banner.querySelector('.slide-cpng-banner-front-nmd'),bg=banner.querySelector('.slide-cpng-banner-back-nmd'),dir=-1,pos=-50,move=0,acc=0,drag=false,dragX=0,paused=false,redirected=false;function checkPos(){if(pos<=-30&&!redirected){redirected=true;setCookie(cookieName_slide_nmd,"true",ck_time_nmd);fg.style.pointerEvents="none";bg.style.pointerEvents="none";banner.style.pointerEvents="none";window.location.href=slide_target_url_nmd;}}function animate(){if(!paused&&!redirected){if(move<4){if(dir===1){acc+=0.05;pos+=1.5+acc;if(pos>=-60){dir=-1;move++;acc=0;}}else{pos-=0.7;if(pos<=-120){dir=1;move++;acc=0;}}fg.style.left=`${pos}px`;requestAnimationFrame(animate);}else{setTimeout(()=>{move=0;requestAnimationFrame(animate);},1000);}}}fg.addEventListener('mousedown',(e)=>{if(redirected)return;drag=true;dragX=e.clientX-pos;e.preventDefault();});document.addEventListener('mousemove',(e)=>{if(drag&&!redirected){pos=e.clientX-dragX;pos=Math.min(Math.max(pos,-150),-60);fg.style.left=`${pos}px`;}});document.addEventListener('mouseup',()=>{drag=false;});fg.addEventListener('touchstart',(e)=>{if(redirected)return;drag=true;dragX=e.touches[0].clientX-pos;e.preventDefault();});bg.addEventListener('touchstart',(e)=>{if(redirected)return;drag=true;e.preventDefault();});document.addEventListener('touchmove',(e)=>{if(drag&&!redirected){let touch=e.touches[0];pos=touch.clientX-dragX;pos=Math.min(Math.max(pos,-150),-60);fg.style.left=`${pos}px`;checkPos();}});bg.addEventListener('touchmove',(e)=>{if(drag&&!redirected){let touch=e.touches[0];pos=touch.clientX-dragX;pos=Math.min(Math.max(pos,-150),-60);fg.style.left=`${pos}px`;checkPos();}});document.addEventListener('touchend',()=>{drag=false;});fg.addEventListener('mouseenter',()=>{paused=true;});fg.addEventListener('mouseleave',()=>{paused=false;animate();});animate();});
